<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Globe</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="Globe js-globe-full"></div>
  <div class="Country__list">
    <div class="Country__btn">
      <div class="Country__label">
        Brazil
      </div>
    </div>
    <div class="Country__btn">
      <div class="Country__label">
        Japan
      </div>
    </div>
    <div class="Country__btn">
      <div class="Country__label">
        Germany
      </div>
    </div>
    <div class="Country__btn">
      <div class="Country__label">
        Mexico
      </div>
    </div>
    <div class="Country__btn">
      <div class="Country__label">
        Canada
      </div>
    </div>
  </div>
  <form id="promptForm">
    <input id="prompt" name="prompt" type="text" class="Prompt" placeholder="What would you like to see?">
    <input type="submit" value="Submit">
  </form>
  
  <div id="response"></div>
  
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('promptForm').addEventListener('submit', function(event) {
      event.preventDefault();
  
      var prompt = document.getElementById('prompt').value;
  
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'https://globe-prompt.vercel.app/prompt.js', true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            var response = JSON.parse(xhr.responseText);
            document.getElementById('response').innerHTML = '<p>' + response.completion + '</p>';
          } else {
            console.error('Request failed: ' + xhr.status);
            document.getElementById('response').innerHTML = '<p>An error occurred. Please try again later.</p>';
          }
        }
      };
      xhr.send(JSON.stringify({ prompt: prompt }));
    });
  });
  </script>
</body>
<script type="module" src="js/main.js"></script>
</html>